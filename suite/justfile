default:
    just --list

build:
    cargo build

test:
    cargo test --all

test-unit:
    cargo test --lib

test-integration:
    cargo test --test rustmax-suite-tests

coverage:
    cargo llvm-cov clean
    cargo llvm-cov
    mkdir -p target/llvm-cov
    cargo llvm-cov report --json --output-path target/llvm-cov/cov.json
    cargo llvm-cov report --html

coverage-full:
    cargo llvm-cov clean
    cargo llvm-cov --profile-coverage
    mkdir -p target/llvm-cov
    cargo llvm-cov report --json --output-path target/llvm-cov/cov.json
    cargo llvm-cov report --html

install-tools:
    cargo install cargo-llvm-cov

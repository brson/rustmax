[package]
name = "rustx"
version.workspace = true
license.workspace = true
edition.workspace = true

[features]

default = [
  "rx-profile-std-plus",
]


## ---------- ##


rx-crates-core = [
  "anyhow",
  "backtrace",
  "blake3",
  "byteorder",
  "bytes",
  "chrono",
  "clap",
  "crossbeam",
  "derive_more",
  "extension-trait",
  "fnv",
  "futures",
  "itertools",
  "libc",
  "log",
  "num_enum",
  "once_cell",
  "rand",
  "rand_chacha",
  "rand_pcg",
]


## ---------- ##


rx-profile-no-std = [
  "rx-rustlibs-core",
  "rx-crates-core",
]

rx-profile-std-plus = [
  "rx-rustlibs-std",
  "rx-crates-core",
  "rx-feature-std",
  "rx-feature-default",
  "big_s",
  "og_fmt",
  "rayon",
]

rx-profile-net = [
  "rx-profile-std-plus",
  "http",
  "hyper",
  "hyper/full",
  "json5",
  "lazy_static",
]

rx-profile-cli = [
  "rx-profile-std-plus",
  "env_logger",
]

rx-profile-async = [
  "rx-profile-std-plus",
]

rx-profile-build-script = [
  "rx-profile-std-plus",
  "cc",
  "cxx",
]

rx-profile-full = [
  "rx-profile-cli",
  "rx-profile-async",
  "rx-profile-build-script",
]


## ---------- ##

rx-feature-std = [  
  "anyhow/std",
  "backtrace/std",
  "blake3/std",
  "byteorder/std",
  "bytes/std",
  "chrono/std",
  "clap/std",
  "crossbeam/std",
  "cxx/std",
  "fnv/std",
  "futures/std",
  "itertools/use_std",
  "libc/std",
  "log/std",
  "num_enum/std",
  "once_cell/std",
  "rand/std",
  "rand/std_rng",
  "rand_chacha/std",
]

rx-feature-default = [
  "chrono/clock", # can't use chrono/default because of RUSTSEC-2020-0071
  "clap/default",
  "futures/default",
]

rx-feature-serde = [
  "backtrace/serde",
  "bytes/serde",
  "log/serde",
  "rand/serde1",
  "rand_chacha/serde1",
  "rand_pcg/serde1",
]

rx-feature-backtrace = [
  "rx-feature-std",
  "anyhow/backtrace",
]

rx-feature-tokio = [
]

rx-feature-nightly = [
  "rand/nightly",
]


## ---------- ##


rx-rustlibs-core = [
  "rx-rustlib-core",
  "rx-rustlib-alloc",
]

rx-rustlibs-std = [
  "rx-rustlib-core",
  "rx-rustlib-alloc",
  "rx-rustlib-std",
  "rx-rustlib-proc_macro",
]

rx-rustlib-core = []
rx-rustlib-alloc = []
rx-rustlib-std = []
rx-rustlib-proc_macro = []


[dependencies]
anyhow = { version = "1.0.69", optional = true, default-features = false }
backtrace = {version = "0.3.67", optional = true, default-features = false }
base64 = "0.21.0"
big_s = { version = "1.0.2", optional = true, default-features = false }
bitflags = "1.3.2"
blake3 = { version = "1.3.3", optional = true, default-features = false }
byteorder = {version = "1.4.3", optional = true, default-features = false }
bytes = { version = "1.4.0", optional = true, default-features = false }
cc = { version = "1.0.79", optional = true, default-features = false }
cfg-if = "1.0.0"
chrono = { version = "0.4.23", optional = true, default-features = false }
clap = { version = "4.1.8", optional = true, default-features = false }
crossbeam = { version = "0.8.2", optional = true, default-features = false }
cxx = { version = "1.0.92", optional = true, default-features = false }
derive_more = { version = "0.99.17", optional = true, default-features = false }
env_logger = { version = "0.10.0", optional = true, default-features = false }
extension-trait = { version = "1.0.1", optional = true, default-features = false }
fnv = { version = "1.0.7", optional = true, default-features = false }
futures = { version = "0.3.26", optional = true, default-features = false }
http = { version = "0.2.9", optional = true, default-features = false }
hex = "0.4.3"
hyper = { version = "0.14.24", optional = true, default-features = false }
itertools = { version = "0.10.5", optional = true, default-features = false }
json5 = { version ="0.4.1", optional = true, default-features = false }
lazy_static = { version = "1.4.0", optional = true, default-features = false }
libc = { version = "0.2.139", optional = true, default-features = false }
log = { version = "0.4.17", optional = true, default-features = false }
mime = "0.3.16"
num_cpus = "1.15.0"
num_enum = { version = "0.5.11", optional = true, default-features = false }
og_fmt = { version = "1.0.4", optional = true, default-features = false }
once_cell = { version = "1.17.1", optional = true, default-features = false }
proc-macro2 = "1.0.51"
quote = "1.0.23"
rand = { version = "0.8.5", optional = true, default-features = false }
rand_chacha = { version = "0.3.1", optional = true, default-features = false }
rand_pcg = { version = "0.3.1", optional = true, default-features = false }
rayon = { version = "1.7.0", optional = true, default-features = false }
regex = "1.7.1"
reqwest = "0.11.14"
serde = "1.0.152"
serde_json = "1.0.94"
socket2 = "0.5.1"
static_assertions = "1.1.0"
syn = "1.0.109"
tempfile = "3.4.0"
termcolor = "1.2.0"
tera = "1.17.1"
thiserror = "1.0.39"
tokio = "1.26.0"
toml = "0.7.2"
unicode-segmentation = "1.10.1"
url = "2.3.1"
walkdir = "2.3.2"
xshell = "0.2.3"
